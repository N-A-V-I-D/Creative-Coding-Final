{"ast":null,"code":"const axios = require('axios');\n\nconst {\n  checkOptions,\n  getTitle\n} = require('./utils');\n\nconst searchUrl = 'https://api.genius.com/search?q=';\n/**\r\n * @param {{apiKey: string, title: string, artist: string, optimizeQuery: boolean, authHeader: boolean}} options\r\n */\n\nmodule.exports = async function (options) {\n  try {\n    checkOptions(options);\n    let {\n      apiKey,\n      title,\n      artist,\n      optimizeQuery = false,\n      authHeader = false\n    } = options;\n    const song = optimizeQuery ? getTitle(title, artist) : `${title} ${artist}`;\n    const reqUrl = `${searchUrl}${encodeURIComponent(song)}`;\n    const headers = {\n      Authorization: 'Bearer ' + apiKey\n    };\n    let {\n      data\n    } = await axios.get(authHeader ? reqUrl : `${reqUrl}&access_token=${apiKey}`, authHeader && {\n      headers\n    });\n    if (data.response.hits.length === 0) return null;\n    const results = data.response.hits.map(val => {\n      const {\n        full_title,\n        song_art_image_url,\n        id,\n        url\n      } = val.result;\n      return {\n        id,\n        title: full_title,\n        albumArt: song_art_image_url,\n        url\n      };\n    });\n    return results;\n  } catch (e) {\n    throw e;\n  }\n};","map":{"version":3,"names":["axios","require","checkOptions","getTitle","searchUrl","module","exports","options","apiKey","title","artist","optimizeQuery","authHeader","song","reqUrl","encodeURIComponent","headers","Authorization","data","get","response","hits","length","results","map","val","full_title","song_art_image_url","id","url","result","albumArt","e"],"sources":["/Users/navid/Documents/Final Project 2/vocab/node_modules/genius-lyrics-api/lib/searchSong.js"],"sourcesContent":["const axios = require('axios');\r\nconst { checkOptions, getTitle } = require('./utils');\r\n\r\nconst searchUrl = 'https://api.genius.com/search?q=';\r\n\r\n/**\r\n * @param {{apiKey: string, title: string, artist: string, optimizeQuery: boolean, authHeader: boolean}} options\r\n */\r\nmodule.exports = async function (options) {\r\n\ttry {\r\n\t\tcheckOptions(options);\r\n\t\tlet { apiKey, title, artist, optimizeQuery = false, authHeader = false } = options;\r\n\t\tconst song = optimizeQuery ? getTitle(title, artist) : `${title} ${artist}`;\r\n\t\tconst reqUrl = `${searchUrl}${encodeURIComponent(song)}`;\r\n\t\tconst headers = {\r\n\t\t\tAuthorization: 'Bearer ' + apiKey\r\n\t\t};\r\n\t\tlet { data } = await axios.get(\r\n\t\t\tauthHeader ? reqUrl : `${reqUrl}&access_token=${apiKey}`,\r\n\t\t\tauthHeader && { headers }\r\n\t\t);\r\n\t\tif (data.response.hits.length === 0) return null;\r\n\t\tconst results = data.response.hits.map((val) => {\r\n\t\t\tconst { full_title, song_art_image_url, id, url } = val.result;\r\n\t\t\treturn { id, title: full_title, albumArt: song_art_image_url, url };\r\n\t\t});\r\n\t\treturn results;\r\n\t} catch (e) {\r\n\t\tthrow e;\r\n\t}\r\n};\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAM;EAAEC,YAAF;EAAgBC;AAAhB,IAA6BF,OAAO,CAAC,SAAD,CAA1C;;AAEA,MAAMG,SAAS,GAAG,kCAAlB;AAEA;AACA;AACA;;AACAC,MAAM,CAACC,OAAP,GAAiB,gBAAgBC,OAAhB,EAAyB;EACzC,IAAI;IACHL,YAAY,CAACK,OAAD,CAAZ;IACA,IAAI;MAAEC,MAAF;MAAUC,KAAV;MAAiBC,MAAjB;MAAyBC,aAAa,GAAG,KAAzC;MAAgDC,UAAU,GAAG;IAA7D,IAAuEL,OAA3E;IACA,MAAMM,IAAI,GAAGF,aAAa,GAAGR,QAAQ,CAACM,KAAD,EAAQC,MAAR,CAAX,GAA8B,GAAED,KAAM,IAAGC,MAAO,EAA1E;IACA,MAAMI,MAAM,GAAI,GAAEV,SAAU,GAAEW,kBAAkB,CAACF,IAAD,CAAO,EAAvD;IACA,MAAMG,OAAO,GAAG;MACfC,aAAa,EAAE,YAAYT;IADZ,CAAhB;IAGA,IAAI;MAAEU;IAAF,IAAW,MAAMlB,KAAK,CAACmB,GAAN,CACpBP,UAAU,GAAGE,MAAH,GAAa,GAAEA,MAAO,iBAAgBN,MAAO,EADnC,EAEpBI,UAAU,IAAI;MAAEI;IAAF,CAFM,CAArB;IAIA,IAAIE,IAAI,CAACE,QAAL,CAAcC,IAAd,CAAmBC,MAAnB,KAA8B,CAAlC,EAAqC,OAAO,IAAP;IACrC,MAAMC,OAAO,GAAGL,IAAI,CAACE,QAAL,CAAcC,IAAd,CAAmBG,GAAnB,CAAwBC,GAAD,IAAS;MAC/C,MAAM;QAAEC,UAAF;QAAcC,kBAAd;QAAkCC,EAAlC;QAAsCC;MAAtC,IAA8CJ,GAAG,CAACK,MAAxD;MACA,OAAO;QAAEF,EAAF;QAAMnB,KAAK,EAAEiB,UAAb;QAAyBK,QAAQ,EAAEJ,kBAAnC;QAAuDE;MAAvD,CAAP;IACA,CAHe,CAAhB;IAIA,OAAON,OAAP;EACA,CAlBD,CAkBE,OAAOS,CAAP,EAAU;IACX,MAAMA,CAAN;EACA;AACD,CAtBD"},"metadata":{},"sourceType":"script"}